<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record model="ir.ui.view" id="tree_form_email_template">
            <field name="name">Email Templates</field>
            <field name="model">email.templates</field>
            <field name="arch" type="xml">
                <tree string="Email Templates" create="false" edit="false" delete="false">
                    <field name="name"/>
                    <field name="template_subject"/>
                    <field name="template_description"/>
                    <field name="template_type_id"/>
                    <field name="auto_get_templates" invisible="1"/>
                </tree>
            </field>

        </record>

        <record model="ir.ui.view" id="form_view_email_template">
            <field name="name">Email Templates</field>
            <field name="model">email.templates</field>
            <field name="arch" type="xml">
                <form string="Email Templates" create="false" edit="false" delete="false">
                    <sheet>
                    <group>
                    <field name="name"/>
                    <field name="template_subject"/>
                    <field name="template_description"/>
                    <field name="template_type_id"/>
                    <br></br>
                        <br></br>
<!--                    <button name="get_templates" type="object"-->
<!--                            string="Import Templates" class="oe_highlight"-->
<!--                            />-->
                    </group>
                    </sheet>
                </form>

            </field>
        </record>


        <record id="action_email_template" model="ir.actions.act_window">
            <field name="name">Email Templates</field>
            <field name="res_model">email.templates</field>
            <field name='view_mode'>tree,form</field>
        </record>


        <record model="ir.ui.view" id="tree_form_email_receipt">
            <field name="name">Email Receipts</field>
            <field name="model">email.receipt</field>
            <field name="arch" type="xml">
                <tree string="Email Receipts" create="false" edit="false" delete="false">
                    <field name="name"/>
                    <field name="receipt_subject"/>
                    <field name="target"/>
                    <field name="content_type"/>
                    <field name="receipt_from_email"/>
                    <field name="auto_get_receipts" invisible="1"/>
<!--                    <field name="template_type_id"/>-->
                </tree>

            </field>

        </record>

        <record model="ir.ui.view" id="form_view_email_receipt">
            <field name="name">Email Receipts</field>
            <field name="model">email.receipt</field>
            <field name="arch" type="xml">
                <form string="Email Receipt" create="false" edit="false" delete="false">
                    <sheet>
                    <group>
                    <field name="name"/>
                    <field name="receipt_subject"/>
                    <field name="receipt_from_email"/>
                        <br></br>
                        <br></br>
<!--                    <field name="template_type_id"/>-->
<!--                    <button name="get_receipts" type="object"-->
<!--                            string="Import Receipts" class="oe_highlight"-->
<!--                            />-->
                    </group>
                    </sheet>
                </form>

            </field>
        </record>


        <record id="action_email_receipt" model="ir.actions.act_window">
            <field name="name">Email Receipts</field>
            <field name="res_model">email.receipt</field>
            <field name='view_mode'>tree,form</field>
        </record>



        <record id="action_ebiz_transaction" model="ir.actions.act_window">
            <field name="name">Transaction</field>
            <field name="res_model">ebiz.charge.transaction</field>
            <field name='view_mode'>tree,form,kanban</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a new payment acquirer
                </p>
            </field>
        </record>



    <data noupdate="1">
            <record id="my_record_01" model="transaction.history">
                <field name="add_filter">0</field>
            </record>
    </data>

         <data noupdate="1">
            <record id="my_record_02" model="batch.processing">
                <field name="add_filter">0</field>
            </record>
    </data>

        <record model="ir.ui.view" id="form_view_transaction_history_new">
            <field name="name">Transaction History</field>
            <field name="model">transaction.history</field>
            <field name="arch" type="xml">
                    <tree create="false" delete="false" editable="bottom">
<!--                    <field name="check_box"/>-->
                        <field name="date_time" readonly="1" widget="datetime"/>
                        <field name="customer_id" readonly="1"/>
                        <field name="invoice_id" readonly="1"/>
<!--                    <field name="order_id" readonly="1"/>-->
                        <field name="email_id" readonly="0"/>
                        <field name="currency_id" readonly="1" invisible="1"/>
                        <field name="amount" options="{'currency_field': 'currency_id'}" widget="monetary" readonly="1"/>
                        <field name="account_holder" readonly="1"/>
                        <field name="card_no" readonly="1"/>
                        <field name="transaction_type" readonly="1"/>
                        <field name="status" readonly="1"/>
                        <field name="transaction_status" readonly="1"/>
                        <field name="ref_no" readonly="1"/>
                        <field name="auth_code"/>
                        <field name="source"/>
                    </tree>
            </field>
        </record>

        <record id="search_view_transaction_history" model="ir.ui.view">
            <field name="name">Transaction History</field>
            <field name="model">transaction.history</field>
            <field name="arch" type="xml" >
                <search string="Payment Lines">
<!--                    <field name="partner_id" />-->
<!--                    <field name="invoice_number"/>-->
<!--                    <field name="type_id"/>-->
<!--                    <field name="payment_method"/>-->
<!--                    <field name="source"/>-->

                    <filter string="One Week" name="lasttwomonths"
                            domain="[
                            ('date_time','&gt;=',(context_today()-relativedelta(days=7)).strftime('%Y-%m-%d')),
                            ('date_time','&lt;=',(context_today()+relativedelta(days=1)).strftime('%Y-%m-%d'))
                            ]" />
                </search>
            </field>
        </record>


<!--        <record model="ir.ui.view" id="form_view_transaction_history">-->
<!--            <field name="name">Transaction History</field>-->
<!--            <field name="model">transaction.history</field>-->
<!--            <field name="arch" type="xml">-->
<!--                <form string="Transaction History" create="false">-->
<!--                    <sheet>-->
<!--                        <h1>Transactions History</h1>-->
<!--                        <br></br>-->
<!--                        <group>-->
<!--                            <group>-->
<!--                                  <field name="select_customer"/>-->
<!--                            </group>-->
<!--                            <group>-->
<!--                                <field name="start_date"/>-->
<!--                                <field name="end_date"/>-->
<!--                            </group>-->
<!--                        </group>-->
<!--                        <br></br>-->

<!--                        <group>-->
<!--                            <group><field name="add_filter" widget='boolean_toggle'/> </group>-->

<!--                        </group>-->
<!--                        <group col="4" attrs="{'invisible': [ ('add_filter','!=',True)]}">-->
<!--                            <group></group>-->
<!--                            <group> <field name="field_name" /></group>-->
<!--                            <group><field name="camparizon_operater" /></group>-->
<!--                            <group><field name="field_value"/></group>-->
<!--                        </group>-->

<!--                        <group col="4" attrs="{'invisible': [ ('add_filter','!=',True)]}">-->
<!--                            <group></group>-->
<!--                            <group> <field name="field_name_2" /></group>-->
<!--                            <group><field name="camparizon_operater_2" /></group>-->
<!--                            <group><field name="field_value_2"/></group>-->

<!--                        </group>-->

<!--                        <group col="4" attrs="{'invisible': [ ('add_filter','!=',True)]}">-->
<!--                            <group></group>-->
<!--                            <group> <field name="field_name_3" /></group>-->
<!--                            <group><field name="camparizon_operater_3" /></group>-->
<!--                            <group><field name="field_value_3"/></group>-->

<!--                        </group>-->

<!--                        <br></br>-->
<!--                        <br></br>-->

<!--                        <button name="search_transaction" type="object"-->
<!--                        string="Refresh" class="oe_highlight"/>-->

<!--                        <br></br>-->
<!--                        <br></br>-->

<!--                                <group col="4">-->
<!--                                    <group col="2">-->
<!--                                        <group>-->
<!--                                            <div class="o_setting_left_pane">-->
<!--                                            <field name="select_unselect" widget="boolean"/>-->
<!--                                        </div>-->
<!--                                         <div class="o_setting_right_pane">-->
<!--                                            <label for="select_unselect"/>-->
<!--                                                <div class="text-muted">-->

<!--                                                </div>-->
<!--                                         </div>-->
<!--                                        </group>-->
<!--                                        <group></group>-->
<!--                                    </group>-->
<!--                                    <group></group>-->
<!--                                    <group></group>-->
<!--                                    <group>-->
<!--                                        <button name="email_receipt_ebiz" type="object"-->
<!--                                                                string="Email Receipt" class="oe_highlight"-->
<!--                                        attrs="{'invisible': ('transaction_history_line','!=', True),}"/>-->
<!--                                        <button name="credit_or_void" type="object"-->
<!--                                                                string="Credit / Void" class="oe_highlight"-->
<!--                                        attrs="{'invisible': ('transaction_history_line','!=', True),}"/>-->

<!--                                </group>-->

<!--                        </group>-->
<!--                                    <field name="transaction_history_line">-->
<!--                                        <tree string="Transaction Lines" editable="bottom" create="false" delete="false" limit="25">-->

<!--                                            <field name="check_box"/>-->
<!--                                            <field name="date_time" readonly="1" widget="date"/>-->
<!--                                            <field name="customer_id" readonly="1"/>-->
<!--                                            <field name="invoice_id" readonly="1"/>-->
<!--&lt;!&ndash;                                            <field name="order_id" readonly="1"/>&ndash;&gt;-->
<!--                                            <field name="email_id"/>-->
<!--&lt;!&ndash;                                            <field name="amount" readonly="1"/>&ndash;&gt;-->
<!--                                            <field name="currency_id" readonly="1" invisible="1"/>-->
<!--                                            <field name="amount" options="{'currency_field': 'currency_id'}" widget="monetary" readonly="1"/>-->
<!--                                            <field name="account_holder" readonly="1"/>-->
<!--                                            <field name="card_no" readonly="1"/>-->
<!--                                            <field name="transaction_type" invisible="1"/>-->
<!--                                            <field name="transaction_type_op" readonly="1"/>-->
<!--                                             <field name="status" invisible="1"/>-->
<!--                                            <field name="status_op" readonly="1"/>-->
<!--                                            <field name="transaction_status" invisible="1"/>-->
<!--                                            <field name="transaction_status_op" readonly="1"/>-->
<!--                                            <field name="ref_no" invisible="1"/>-->
<!--                                            <field name="ref_no_op" readonly="1"/>-->
<!--                                            <field name="auth_code"/>-->
<!--                                            <field name="source"/>-->

<!--                                        </tree>-->

<!--                                    </field>-->
<!--                    </sheet>-->
<!--                </form>-->

<!--            </field>-->
<!--        </record>-->

        <record id="action_email_receipt_transaction" model="ir.actions.server">
        <field name="name">Email Receipt</field>
        <field name="type">ir.actions.server</field>
        <field name="model_id" ref="model_transaction_history" />
        <field name="binding_model_id" ref="model_transaction_history" />
        <field name="state">code</field>
        <field name="code">action = records.email_receipt_ebiz()</field>
        </record>

        <record id="action_email_receipt_credit_void" model="ir.actions.server">
        <field name="name">Credit/Void</field>
        <field name="type">ir.actions.server</field>
        <field name="model_id" ref="model_transaction_history" />
        <field name="binding_model_id" ref="model_transaction_history" />
        <field name="state">code</field>
        <field name="code">action = records.credit_or_void()</field>
        </record>
        
        <data noupdate="1">
            <record id="my_record_04" model="payment.method.ui">
                <field name="add_filter">0</field>
            </record>
        </data>

        <record id="action_request_payment_method_ui" model="ir.actions.act_window">
            <field name="name">Request Payment Methods</field>
            <field name="res_model">payment.method.ui</field>
<!--             <field name="res_id" ref="my_record_04"/>-->
             <field name="target">inline</field>
            <field name='view_mode'>form,tree</field>
        </record>



        <record id="action_transaction_id" model="ir.actions.act_window">
            <field name="name">Transaction History</field>
            <field name="res_model">transaction.history</field>
<!--              <field name="res_id" ref="my_record_01"/>-->
<!--             <field name="target">inline</field>-->
            <field name="context">{'search_default_lasttwomonths':1}</field>
            <field name="view_id" ref="payment_ebizcharge.form_view_transaction_history_new"/>
            <field name='view_mode'>tree</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No transactions found
                </p>
            </field>
        </record>

        <record id="payment_bulk_request" model="ir.actions.act_window">
            <field name="name">Email Pay for Invoices</field>
            <field name="res_model">payment.request.bulk.email</field>
<!--             <field name="res_id" ref="my_record_03"/>-->
             <field name="target">inline</field>
<!--             <field name="context">{'Read':"True"}</field>-->
            <field name='view_mode'>form,tree</field>
        </record>


        <menuitem id="email_template_menu"
            name="Email Templates"
            parent="setup_menu_main"
            action="action_email_template"
            sequence="2"/>

        <menuitem id="email_receipt_menu"
            name="Email Receipts"
            parent="setup_menu_main"
            action="action_email_receipt"
            sequence="3"/>

        <menuitem id="transaction_history_menu"
            name="Transaction History"
            parent="ebiz_transactions_menu_main"
            action="action_transaction_id"
            sequence="0"/>

        

        <menuitem id="payment_method_ui"
            name="Request Payment Methods"
            parent="ebiz_email_template_menu_main"
            action="action_request_payment_method_ui"
            sequence="2"/>

        <menuitem id="request_payment_view_email"
            name="Email Pay for Invoices"
                  action="payment_bulk_request"
            parent="ebiz_email_template_menu_main"
            sequence="1"/>


    </data>
</odoo>