<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="view_sale_order_ebizcharge" model="ir.ui.view">
            <field name="name">res.partner.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <header position='inside'>
                    <field name="ebiz_internal_id" invisible="1"/>
                    <field name="ebiz_transaction_id" invisible="1"/>
                    <field name="receipt_status" invisible="1"/>
                    <field name="ebiz_auto_sync" invisible="1"/>
                    <field name="payment_internal_id" invisible="1"/>
                    <field name="done_transaction_ids" invisible="1"/>
                    <field name="is_invoice_paid" invisible="1"/>
                   <!--  <field name="refund_picking_ids" invisible="1"/> -->
                    <button name="sync_to_ebiz_ind" type="object"
                        string="EBizCharge Upload" class="oe_highlight"
                        attrs="{'invisible': ['|', ('ebiz_internal_id','!=',False), ('ebiz_auto_sync','=', True)]}"/>


                </header>
                <field name="partner_id" position="after">
                    <field name="sync_status" readonly='1'/>
                </field>

                <group name="sale_info" position="inside">
                    <field name="ebiz_transaction_ref"/>
                </group>
            </field>
        </record>

        <record id="view_order_ebizcharge_status" model="ir.ui.view">
            <field name="name">sale.order.ebiz.status</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_tree"/>
            <field name="arch" type="xml">
                <tree>
                    <field name="sync_status" optional="show"></field>
                </tree>
            </field>
        </record>

        <record id="view_qa_order_ebizcharge_status" model="ir.ui.view">
            <field name="name">sale.order.ebiz.status</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_quotation_tree_with_onboarding"/>
            <field name="arch" type="xml">
                <tree>
                    <field name="sync_status" optional="show"></field>
                </tree>
                <field name="amount_total" position="before">
                        <field name="amount_due_custom" options="{'currency_field': 'currency_id'}" widget="monetary"/>
                    </field>
            </field>
        </record>

        <record id="view_qa_order_ebizcharge_status_sale" model="ir.ui.view">
            <field name="name">sale.order.ebiz.status.sale</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_tree"/>
            <field name="arch" type="xml">
                <field name="amount_total" position="before">
                        <field name="amount_due_custom" options="{'currency_field': 'currency_id'}" widget="monetary"/>
                    </field>
            </field>
        </record>

        <record id="view_sale_order_upload_tree" model="ir.ui.view">
            <field name="name">sale.order.form</field>
            <field name="model">sale.order</field>
            <field name="arch" type="xml">
                <tree create="0">
                    <field name = "name" string="Order Number"/>
                    <field name = "partner_id"/>
                    <field name = "customer_id"/>
                    <!-- <field name = "user_id"/> -->
                    <field name = "currency_id" invisible="1"/>
                    <field name = "amount_total" string = "Order Total" options="{'currency_field': 'currency_id'}" widget="monetary"/>
                    <field name = "amount_due_custom" string = "Balance Remaining" options="{'currency_field': 'currency_id'}" widget="monetary"/>
                    <field name = "state" invisible="1"/>
                    <field name = "date_order"/>
                    <!-- <field name = "ebiz_internal_id"/> -->
                    <field name = "last_sync_date"/>
                    <!-- <field name = "sync_status"/> -->
                    <field name = "sync_response"/>
                </tree>                    
            </field>
        </record>

        <record id="action_sale_order_sync_tree" model="ir.actions.act_window">
            <field name="name">Sales Orders</field>
            <field name="res_model">sale.order</field>
            <field name='view_mode'>tree</field>
            <field name="context">{'ebiz_upload_sale_action':1}</field>
            <field name='view_id' ref="view_sale_order_upload_tree"/>
        </record>

<!--        <menuitem id="menu_sale_order_sync"-->
<!--            name="Upload Sale Orders"-->
<!--            parent="ebiz_upload_menu_main"-->
<!--            action="action_sale_order_sync_tree"-->
<!--            sequence="1"/>-->

        <record id="model_action_wizard_sale_multi_sync" model="ir.actions.server">
            <field name="name">EBizCharge Upload</field>
            <field name="model_id" ref="sale.model_sale_order"/>
            <field name="binding_model_id" ref="sale.model_sale_order"/>
            <field name="binding_view_types">list</field>
            <field name="state">code</field>
            <field name="code">action = records.sync_multi_sale_orders()</field>
        </record>

<!--        <record id="sale_order_logs_check" model="ir.actions.server">-->
<!--        <field name="name">Sync Logs</field>-->
<!--        <field name="type">ir.actions.server</field>-->
<!--        <field name="model_id" ref="model_sale_order" />-->
<!--        <field name="binding_model_id" ref="model_sale_order" />-->
<!--        <field name="state">code</field>-->
<!--        <field name="code">action = records.view_logs()</field>-->
<!--        </record>-->
        <record id="view_sale_advance_payment_inv_inherit" model="ir.ui.view">
            <field name="name">Invoice Orders</field>
            <field name="model">sale.advance.payment.inv</field>
            <field name="inherit_id" ref="sale.view_sale_advance_payment_inv"/>
            <field name="arch" type="xml">
                <field name="count" position="after">
                    <field name="is_website_order" invisible="1"/>
                </field>
                <field name="advance_payment_method" position="attributes">
                    <attribute name="attrs">{'readonly': [('is_website_order','=', True)]}</attribute>
                </field>
                        
            </field>
        </record>

    </data>
</odoo>